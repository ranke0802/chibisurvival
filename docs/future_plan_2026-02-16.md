# 현재 프로젝트 분석 및 향후 플랜

- 작성일: 2026-02-16
- 범위: 코드베이스(`src`), 에셋 파이프라인(`public/assets`, `scripts`), 문서(`docs`)

## 1) 현재 상태 분석

## 1.1 제품/게임플레이 상태
강점
- 3캐릭터, 5스테이지, 보스전, 레벨업 3선택 구조가 동작함
- 스킬 3종과 보스 텔레그래프 3종으로 전투 리듬이 구성됨
- 모바일 드래그 입력, 실시간 설정, 오디오 믹싱 등 사용성 기능이 포함됨

약점
- 캐릭터 모션 품질이 에셋 상태에 크게 의존하며, 교체 시 깨질 가능성이 높음
- 시각 자산 품질(노이즈/투명도/프레임 정렬) 편차가 큼
- 회귀 검증이 `build` 중심으로, 실제 플레이 검증 자동화가 제한적임

## 1.2 아키텍처 상태
강점
- 로직(`engine`) / 렌더링(`renderer`) / UI(`App`) / 오디오(`AudioManager`) 분리
- 타입(`types.ts`) 기반 밸런스/설정 데이터 일원화

리스크
- 모션 시트 규격 기대치와 생성 문서/스크립트의 불일치가 존재
  - 런타임(렌더러): 8x12(방향 포함) 기대
  - 일부 프롬프트/생성 결과: 8x3 산출
- 스크립트가 다수 누적되어 단일 표준 파이프라인 정의가 약함

## 1.3 에셋 파이프라인 상태
관찰
- `public/assets/characters`에 운영 파일 + 중간 산출(`refined_*`)이 혼재
- `scripts/` 내 모션 관련 스크립트가 여러 개 존재(목적 겹침 가능)

영향
- 어떤 스크립트가 “정식 파이프라인”인지 팀/도구 관점에서 혼동 발생
- AI 재생성 후 품질/규격 미스매치가 반복됨

## 2) 핵심 이슈 우선순위

P0 (즉시)
1. 모션 시트 표준 스펙 고정(문서/코드/스크립트 일치)
2. AI 생성 결과 자동 검증(크기, 행/열, 투명 배경 노이즈, 프레임 중심 이동량)
3. 런타임에서 스펙 불일치 시 경고 로그 및 안전 fallback

P1 (단기)
1. 에셋 파이프라인 단일화(스크립트 정리 및 deprecated 표시)
2. QA 시나리오 자동화 확대(Playwright + 주요 전투 흐름)
3. 밸런스 파라미터를 데이터 파일로 분리(튜닝 속도 개선)

P2 (중기)
1. 캐릭터별 고유 액션 연출(전사 2타, 궁수 차징샷, 마법사 캐스팅 단계화)
2. 보스 패턴 다양화(추가 패턴 + 페이즈 전환)
3. 저장/불러오기(설정 외 진행 데이터) 도입

## 3) 실행 계획 (4주)

## Week 1: 안정화
1. 모션 시트 스펙 결정(권장: 8x12 유지 또는 8x3로 엔진/렌더러 단순화 중 택1)
2. `scripts/validate_motion_sheet.py` 추가
3. `README`/프롬프트 문서/스크립트 헤더를 동일 스펙으로 정합화

완료 기준
- 잘못된 시트를 넣으면 자동으로 실패/경고가 발생
- 팀원이 문서 1개만 보고 동일 결과를 재현 가능

## Week 2: 파이프라인 정리
1. 중복 스크립트 통폐합(실사용만 남기고 deprecated 처리)
2. `public/assets/characters` 정리(운영/원본/중간 산출 분리)
3. 배경/캐릭터/몬스터 생성-후처리-검수 체인 확정

완료 기준
- 신규 에셋 교체 시 수동 개입 최소화

## Week 3: 플레이 감각 개선
1. 캐릭터별 공격 모션 차별화 강화
2. 피격/킬/보스 패턴 피드백 강화(사운드/이펙트 동기화)
3. 난이도 곡선 및 드롭/레벨업 밸런스 재조정

완료 기준
- 초기 10분 플레이 기준 이탈 포인트 감소

## Week 4: QA 및 출시 준비
1. Playwright 스모크 + 수동 체감 QA 체크리스트 확장
2. 성능 점검(프레임 드랍 구간 측정, 파티클/오디오 부하 조정)
3. 릴리즈 노트/운영 가이드 작성

완료 기준
- 기본 시나리오(시작->스테이지 진행->보스->종료) 무오류 통과

## 4) 권장 운영 원칙
1. 코드/문서/프롬프트의 스펙 단일 소스 유지
2. 신규 에셋은 “검증 스크립트 통과” 후 반영
3. 회의록은 유지하되, 최종 기준 문서는 1개로 축약

## 5) 즉시 실행 액션 (오늘)
1. 모션 시트 표준 스펙 최종 확정(8x12 vs 8x3)
2. 선택한 스펙 기준으로 Gemini 프롬프트 문서 1개로 통합
3. `validate_motion_sheet.py` 작성 및 `npm run build` 전에 실행하도록 훅 연결
